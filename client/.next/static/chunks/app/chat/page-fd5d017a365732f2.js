(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{3741:(e,s,a)=>{Promise.resolve().then(a.bind(a,2727))},2727:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(5155),c=a(5906),n=a(6046),r=a(2115),l=a(3391);a(2264);let i=()=>{let e=(0,r.useRef)(null),s=(0,n.useRouter)(),{localName:a}=(0,l.d4)(e=>e.data),[i,u]=(0,r.useState)(""),[d,m]=(0,r.useState)([]),[o,h]=(0,r.useState)(!1),x=(0,r.useRef)(null),p=()=>{i.trim()&&(c.A.emit("sendMessae",i),u(""),m(e=>e.length>10?e.slice(1):e))},f=e=>{u(e)},j=()=>{c.A.on("liveMsg",e=>{m(s=>[...s,e])})},v=d.some(e=>"Хочу Музыку"===e.msg);(0,r.useEffect)(()=>{var s;e.current&&v&&e.current.play(),null===(s=x.current)||void 0===s||s.scrollIntoView({behavior:"smooth"})},[d,v]),(0,r.useEffect)(()=>(j(),c.A.on("currentUser",e=>{e<=1&&s.push("/loader")}),()=>{c.A.off("currentUser"),c.A.off("liveMsg"),c.A.emit("chat_leave",a)}),[s,a]);let N=e=>{"Enter"===e.key&&(e.preventDefault(),p())};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"chat-container",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"chat",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("a",{href:"",children:"Завершить чат"}),(0,t.jsx)("a",{href:"",children:"Пожаловаться"})]}),(0,t.jsxs)("div",{className:"set-message",children:[(0,t.jsxs)("audio",{ref:e,children:[(0,t.jsx)("source",{src:"https://zaycev.europium.zerocdn.com/bc43a68fa9baa2a25fa99e1933b20e4b:2025012512/track/24881994.mp3",type:"audio/mp3"}),"Ваш браузер не поддерживает элемент audio."]}),(0,t.jsxs)("div",{className:"message",children:[(0,t.jsx)("span",{className:"",children:"Администратор"}),(0,t.jsx)("span",{className:"",children:"Моменты первого контакта могут изменить вашу жизнь. Сделайте этот первый шаг и отправьте сообщение."}),(0,t.jsx)("div",{children:["Хочу Музыку","Как дела?"].map((e,s)=>(0,t.jsx)("span",{onClick:()=>f(e),className:"music",children:e},s))})]}),d.map((e,s)=>(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{ref:x,className:"message",children:[(0,t.jsx)("span",{className:"textUser",children:e.name}),(0,t.jsx)("span",{className:"",children:e.msg})]},s)}))]}),(0,t.jsxs)("form",{className:"chat-form",action:"",children:[(0,t.jsx)("input",{onChange:e=>u(e.target.value),onClick:()=>h(!0),className:"text-input ".concat(o?"sizeText":""),type:"text",placeholder:"Введите ваше сообшение",onKeyDown:e=>N(e),value:i}),(0,t.jsx)("input",{onClick:()=>p(),className:"submit-button",type:"button",value:"Отправить"})]})]})})})})}},5906:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1319).io)("http://192.168.43.89:4000/")},2264:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[855,264,319,441,517,358],()=>s(3741)),_N_E=e.O()}]);