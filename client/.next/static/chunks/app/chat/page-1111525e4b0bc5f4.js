(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{3741:(e,s,a)=>{Promise.resolve().then(a.bind(a,2727))},2727:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(5155),l=a(5906),c=a(6046),n=a(2115),r=a(3391);a(2264);let i=()=>{let e=(0,n.useRef)(null),s=(0,c.useRouter)(),{localName:a}=(0,r.d4)(e=>e.data),[i,u]=(0,n.useState)(""),[o,m]=(0,n.useState)([]),[d,h]=(0,n.useState)(!1),p=(0,n.useRef)(null),x=()=>{i.trim()&&(l.A.emit("sendMessae",i),u(""),m(e=>e.length>10?e.slice(1):e))},v=e=>{u(e)},f=()=>{l.A.on("liveMsg",e=>{m(s=>[...s,e])})},j=o.some(e=>"Хочу Музыку"===e.msg);(0,n.useEffect)(()=>{var s;e.current&&j&&e.current.play(),null===(s=p.current)||void 0===s||s.scrollIntoView({behavior:"smooth"})},[o,j]),(0,n.useEffect)(()=>(f(),a||s.push("/"),l.A.on("currentUser",e=>{e<=1&&s.push("/loader")}),()=>{l.A.off("currentUser"),l.A.off("liveMsg"),l.A.emit("chat_leave",a)}),[s,a]);let N=e=>{"Enter"===e.key&&(e.preventDefault(),x())};return a?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"chat-container",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"chat",children:[(0,t.jsxs)("div",{className:"set-message",children:[(0,t.jsxs)("audio",{ref:e,children:[(0,t.jsx)("source",{src:"https://zaycev.europium.zerocdn.com/bc43a68fa9baa2a25fa99e1933b20e4b:2025012512/track/24881994.mp3",type:"audio/mp3"}),"Ваш браузер не поддерживает элемент audio."]}),(0,t.jsxs)("div",{className:"message",children:[(0,t.jsx)("span",{className:"",children:"Администратор"}),(0,t.jsx)("span",{className:"",children:"Моменты первого контакта могут изменить вашу жизнь. Сделайте этот первый шаг и отправьте сообщение."}),(0,t.jsx)("div",{children:["Хочу Музыку","Как дела?"].map((e,s)=>(0,t.jsx)("span",{onClick:()=>v(e),className:"music",children:e},s))})]}),o.map((e,s)=>(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{ref:p,className:"message",children:[(0,t.jsx)("span",{className:"textUser",children:e.name}),(0,t.jsx)("span",{className:"",children:e.msg})]},s)}))]}),(0,t.jsxs)("form",{className:"chat-form",action:"",children:[(0,t.jsx)("input",{onChange:e=>u(e.target.value),onClick:()=>h(!0),className:"text-input ".concat(d?"sizeText":""),type:"text",placeholder:"Введите ваше сообшение",onKeyDown:e=>N(e),value:i}),(0,t.jsx)("input",{onClick:()=>x(),className:"submit-button",type:"button",value:"Отправить"})]})]})})})}):null}},5906:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1319).io)("http://localhost:4000")},2264:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[855,264,319,441,517,358],()=>s(3741)),_N_E=e.O()}]);