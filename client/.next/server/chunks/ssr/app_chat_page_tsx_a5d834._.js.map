{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/khami/OneDrive/Desktop/next/client/app/chat/page.tsx"],"sourcesContent":["'use client'\r\nimport socket from '@/app/socket';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport './style.scss'\r\ninterface Message {\r\n    name: string;\r\n    msg: string;\r\n}\r\nconst Chat = () => {\r\n    const audioRef = useRef<HTMLAudioElement | null>(null);\r\n    const router = useRouter()\r\n    const { localName, currentPath } = useSelector((name: any) => name.data);\r\n    const [localMessage, setLocalMessage] = useState<string>('');\r\n    const [history, setHistory] = useState<Message[]>([])\r\n    const [StandardMessages, setStandardMessages] = useState(['Хочу Музыку', 'Как дела?']);\r\n    const [inputActive, setInputActive] = useState<boolean>(false)\r\n\r\n    const sendMessage = () => {\r\n        socket.emit('sendMessae', localMessage)\r\n    }\r\n\r\n    const generatePredefinedMessages = (item: string) => {\r\n        socket.emit('sendMessae', item)\r\n    }\r\n    const getLiveMessages = () => {\r\n        socket.on('liveMsg', (msg) => {\r\n            setHistory((prew) => [...prew, msg])\r\n        })\r\n    };\r\n    const isMusicMessagePresent = history.some((item) => item.msg === 'Хочу Музыку');\r\n\r\n    useEffect(() => {\r\n        if (audioRef.current && isMusicMessagePresent) {\r\n            audioRef.current.play();\r\n        }\r\n    }, [history]);\r\n\r\n    useEffect(() => {\r\n        getLiveMessages()\r\n        socket.on('currentUser', data => {\r\n            console.log(data);\r\n\r\n            if (data <= 1) {\r\n                router.push('/loader')\r\n            }\r\n        })\r\n        return () => {\r\n            socket.off('currentUser')\r\n            socket.off('liveMsg');\r\n            socket.emit('chat_leave', localName)\r\n        }\r\n    }, [router]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"chat-container\">\r\n                <div className=\"container\">\r\n                    <div className=\"chat\">\r\n                        <div>\r\n                            <a href=\"\">Завершить чат</a>\r\n                            <a href=\"\">Пожаловаться</a>\r\n                        </div>\r\n                        <div className=\"set-message\">\r\n                            <audio ref={audioRef} loop>\r\n                                <source src=\"https://zaycev.fobetor.zerocdn.com/9ca97a498a9ec12f700350cbbfcc7e0e:2025011916/track/24972322.mp3\" type=\"audio/mp3\" />\r\n                                Ваш браузер не поддерживает элемент audio.\r\n                            </audio>\r\n                            <div className=\"message\">\r\n                                <span className=\"\">Администратор</span>\r\n                                <span className=\"\">Моменты первого контакта могут изменить вашу жизнь. Сделайте этот первый шаг и отправьте сообщение.</span>\r\n                                {\r\n                                    <div>\r\n                                        {\r\n                                            StandardMessages.map((item) => <span onClick={() => generatePredefinedMessages(item)} className='music'>{item}</span>)\r\n                                        }\r\n\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                            {\r\n                                history.map((item, index) => {\r\n                                    return (\r\n                                        <>\r\n                                            <div key={index} className=\"message\">\r\n                                                <span className=\"textUser\">{item.name}</span>\r\n                                                <span className=\"\">{item.msg}</span>\r\n                                            </div>\r\n                                        </>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                        <form className=\"chat-form\" action=\"\">\r\n                            <input\r\n                                onChange={(e) => setLocalMessage(e.target.value)}\r\n                                onClick={() => setInputActive(true)}\r\n                                className={`text-input ${inputActive ? 'sizeText' : ''}`}\r\n                                type=\"text\" placeholder=\"Введите ваше сообшение\" />\r\n                            <input onClick={() => sendMessage()} className=\"submit-button\" type=\"button\" value=\"Отправить\" />\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default Chat;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}